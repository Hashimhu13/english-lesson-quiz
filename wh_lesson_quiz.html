<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>شرح قواعد WH (what - when - on - in - how old) + اختبار صوتي</title>
  <style>
    /* Modern CSS Variables */
    :root{
      --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --card: #ffffff;
      --accent: #4f46e5;
      --accent-hover: #3730a3;
      --success: #10b981;
      --success-light: #d1fae5;
      --error: #ef4444;
      --error-light: #fee2e2;
      --muted: #6b7280;
      --text: #1f2937;
      --border: #e5e7eb;
      --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-hover: 0 20px 30px -10px rgba(0, 0, 0, 0.2);
    }

    /* Enhanced Body and Typography */
    body{
      font-family: "Noto Sans Arabic", "Segoe UI", system-ui, -apple-system, sans-serif; 
      background: var(--bg);
      margin: 0; 
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* Container with better spacing */
    .container{
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Enhanced Header */
    header{
      text-align: center;
      margin-bottom: 3rem;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: var(--shadow);
    }

    h1{
      margin: 0;
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1rem;
    }

    p.lead{
      margin: 0;
      color: var(--muted);
      font-size: 1.2rem;
      font-weight: 500;
    }

    /* Improved Grid Layout */
    .grid{
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 2rem;
      align-items: start;
    }

    /* Enhanced Card Design */
    .card{
      background: var(--card);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      margin-bottom: 1.5rem;
    }

    .card:hover{
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
    }

    /* Section Headings */
    h2{
      color: var(--accent);
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid var(--accent);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    h2::before{
      content: "📚";
      font-size: 1.5rem;
    }

    h3{
      color: var(--text);
      font-size: 1.4rem;
      font-weight: 600;
      margin: 1.5rem 0 1rem 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Enhanced Rule Section */
    .rule{
      line-height: 1.8;
    }

    .rule p{
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
    }

    /* Better Lists */
    ul.examples{
      padding-left: 0;
      list-style: none;
    }

    .example{
      margin: 1rem 0;
      padding: 1rem;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 12px;
      border-left: 4px solid var(--accent);
      transition: all 0.3s ease;
    }

    .example:hover{
      transform: translateX(5px);
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.15);
    }

    /* Enhanced Buttons */
    button, .btn{
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
      color: #fff;
      border: 0;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(79, 70, 229, 0.25);
    }

    button:hover, .btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 8px 15px rgba(79, 70, 229, 0.35);
    }

    .btn.secondary{
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      color: var(--text);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .small{
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
    }

    /* Practice Section Improvements */
    .practice .row{
      display: flex;
      gap: 1rem;
      align-items: center;
      margin: 1.5rem 0;
      padding: 1rem;
      background: #f8fafc;
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .practice .row:hover{
      background: #f1f5f9;
      transform: scale(1.02);
    }

    /* Enhanced Input Fields */
    input[type=text]{
      padding: 0.75rem 1rem;
      border-radius: 10px;
      border: 2px solid var(--border);
      flex: 1;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    input[type=text]:focus{
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    /* Feedback Styling */
    .feedback{
      font-weight: 700;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      min-width: 100px;
      text-align: center;
    }

    .correct{
      color: var(--success);
      background: var(--success-light);
    }

    .wrong{
      color: var(--error);
      background: var(--error-light);
    }

    /* Enhanced Quiz Styling */
    .quiz-list{
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .quiz-item{
      padding: 1.5rem;
      border-radius: 15px;
      border: 2px solid var(--border);
      margin: 1.5rem 0;
      background: #fafafa;
      transition: all 0.3s ease;
    }

    .quiz-item:hover{
      border-color: var(--accent);
      transform: scale(1.01);
    }

    /* Sidebar Enhancements */
    aside .card{
      position: sticky;
      top: 2rem;
    }

    aside ul{
      list-style: none;
      padding: 0;
    }

    aside li{
      margin: 1rem 0;
      padding: 0.75rem;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 10px;
      border-left: 4px solid var(--accent);
    }

    /* Progress and Visual Elements */
    code{
      background: var(--accent);
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      font-weight: 600;
    }

    hr{
      border: none;
      height: 2px;
      background: linear-gradient(135deg, var(--accent) 0%, #7c3aed 100%);
      border-radius: 2px;
      margin: 2rem 0;
    }

    /* Responsive Design */
    @media(max-width:968px){
      .grid{
        grid-template-columns: 1fr;
      }
      
      .container{
        padding: 1rem;
      }
      
      .card{
        padding: 1.5rem;
      }
      
      h1{
        font-size: 2rem;
      }
      
      .practice .row{
        flex-direction: column;
        gap: 0.5rem;
        align-items: stretch;
      }
    }

    /* Animation for loading */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card {
      animation: fadeInUp 0.6s ease-out;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>🎯 دليل شامل لأسئلة WH في الإنجليزية</h1>
      <p class="lead">تعلم استخدام What, When, In, On, How Old مع أمثلة تفاعلية ونطق صوتي</p>
    </header>

    <div class="grid">
      <!-- LEFT: lesson + practice -->
      <div>
        <!-- Introduction Section -->
        <section class="card rule">
          <h2>🎓 مقدمة تعليمية</h2>
          <p style="font-size: 1.1rem; background: #e0f2fe; padding: 1.5rem; border-radius: 12px; border-left: 4px solid #0288d1;">
            <strong>📌 الهدف من هذا الدرس:</strong><br>
            سنتعلم معاً كيفية استخدام أدوات السؤال في الإنجليزية وحروف الجر المرتبطة بالزمن. هذه القواعد أساسية للتواصل باللغة الإنجليزية.
          </p>

          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
            <div style="padding: 1rem; background: #fff3e0; border-radius: 10px; border-left: 4px solid #ff9800;">
              <strong>🎯 ما ستتعلمه:</strong>
              <ul style="margin: 0.5rem 0 0 1rem;">
                <li>أسئلة WH الأساسية</li>
                <li>استخدام In و On</li>
                <li>التعبير عن العمر</li>
              </ul>
            </div>
            <div style="padding: 1rem; background: #f3e5f5; border-radius: 10px; border-left: 4px solid #9c27b0;">
              <strong>⏱️ مدة الدرس:</strong>
              <ul style="margin: 0.5rem 0 0 1rem;">
                <li>القراءة: 10 دقائق</li>
                <li>التدريب: 15 دقيقة</li>
                <li>الاختبار: 10 دقائق</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Core Rules Section -->
        <section class="card rule">
          <h2>📋 القواعد الأساسية</h2>
          
          <div style="display: grid; gap: 1.5rem;">
            <!-- What Section -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-radius: 15px;">
              <h3 style="color: #0d47a1; margin-top: 0;">❓ What (ماذا/ما)</h3>
              <p><strong>الاستخدام:</strong> للسؤال عن الأشياء والأسماء والمعلومات</p>
              <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <strong>أمثلة:</strong><br>
                • What is your name? → اسمك إيه؟<br>
                • What is that? → ده إيه؟<br>
                • What time is it? → الساعة كام؟
              </div>
            </div>

            <!-- When Section -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); border-radius: 15px;">
              <h3 style="color: #6a1b9a; margin-top: 0;">⏰ When (متى)</h3>
              <p><strong>الاستخدام:</strong> للسؤال عن الوقت والزمن والتاريخ</p>
              <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <strong>أمثلة:</strong><br>
                • When is your birthday? → عيد ميلادك امتى؟<br>
                • When do you wake up? → بتصحى امتى؟<br>
                • When is the meeting? → الاجتماع امتى؟
              </div>
            </div>

            <!-- In Section -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); border-radius: 15px;">
              <h3 style="color: #2e7d32; margin-top: 0;">📅 In (في)</h3>
              <p><strong>الاستخدام:</strong> مع الشهور والسنوات والفصول والأوقات الطويلة</p>
              <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <strong>أمثلة:</strong><br>
                • in July → في يوليو<br>
                • in 2024 → في 2024<br>
                • in summer → في الصيف<br>
                • in the morning → في الصباح
              </div>
            </div>

            <!-- On Section -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%); border-radius: 15px;">
              <h3 style="color: #ef6c00; margin-top: 0;">📆 On (في/على)</h3>
              <p><strong>الاستخدام:</strong> مع أيام الأسبوع والتواريخ المحددة</p>
              <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <strong>أمثلة:</strong><br>
                • on Monday → يوم الاتنين<br>
                • on May 4th → في 4 مايو<br>
                • on my birthday → في عيد ميلادي<br>
                • on weekends → في نهاية الأسبوع
              </div>
            </div>

            <!-- How Old Section -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%); border-radius: 15px;">
              <h3 style="color: #c2185b; margin-top: 0;">🎂 How Old (كم العمر)</h3>
              <p><strong>الاستخدام:</strong> للسؤال عن العمر</p>
              <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <strong>أمثلة:</strong><br>
                • How old are you? → عمرك كام؟<br>
                • I'm 20 years old → عندي 20 سنة<br>
                • She's fifteen → هي عندها خمستاشر سنة
              </div>
            </div>
          </div>

          <div style="background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%); padding: 1.5rem; border-radius: 12px; margin-top: 2rem;">
            <h3 style="color: #c62828; margin-top: 0;">💡 نصائح مهمة للحفظ</h3>
            <ul style="font-size: 1.1rem; line-height: 1.8;">
              <li><strong>IN</strong> = الأشياء الكبيرة (شهور، سنين، فصول)</li>
              <li><strong>ON</strong> = الأشياء المحددة (أيام، تواريخ)</li>
              <li><strong>What</strong> = عن الأشياء</li>
              <li><strong>When</strong> = عن الوقت</li>
              <li><strong>How old</strong> = عن العمر</li>
            </ul>
          </div>
        </section>

        <!-- Examples Section -->
        <section class="card">
          <h2>🎯 أمثلة تطبيقية مع الصوت</h2>
          <p>اضغط على 🔊 لسماع النطق الصحيح</p>
          
          <div class="examples-grid" style="display: grid; gap: 1rem;">
            <div class="example" onclick="speak('When is your vacation? It is in July.')">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <strong>📅 When is your vacation?</strong><br>
                  <em style="color: #4f46e5;">It's in July.</em><br>
                  <small style="color: #6b7280;">إجازتك متى؟ - في شهر يوليو</small>
                </div>
                <button class="small">🔊</button>
              </div>
            </div>

            <div class="example" onclick="speak('The party is on Friday.')">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <strong>🎉 The party is on Friday.</strong><br>
                  <small style="color: #6b7280;">الحفلة يوم الجمعة</small>
                </div>
                <button class="small">🔊</button>
              </div>
            </div>

            <div class="example" onclick="speak('How old are you? I am fifteen years old.')">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <strong>🎂 How old are you?</strong><br>
                  <em style="color: #4f46e5;">I'm fifteen years old.</em><br>
                  <small style="color: #6b7280;">عمرك كام؟ - عندي خمستاشر سنة</small>
                </div>
                <button class="small">🔊</button>
              </div>
            </div>

            <div class="example" onclick="speak('What is the date today? It is May fourth.')">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <strong>📋 What is the date today?</strong><br>
                  <em style="color: #4f46e5;">It's May 4th.</em><br>
                  <small style="color: #6b7280;">النهاردة كام؟ - 4 مايو</small>
                </div>
                <button class="small">🔊</button>
              </div>
            </div>

            <div class="example" onclick="speak('Our final test is in September.')">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <strong>📝 Our final test is in September.</strong><br>
                  <small style="color: #6b7280;">الامتحان النهائي في سبتمبر</small>
                </div>
                <button class="small">🔊</button>
              </div>
            </div>
          </div>

          <div style="margin-top: 1.5rem; text-align: center;">
            <button onclick="readAllExamples()" style="font-size: 1.1rem; padding: 1rem 2rem;">
              🔊 اقرأ جميع الأمثلة
            </button>
          </div>
        </section>

        <section class="card practice">
          <h2>🏋️‍♀️ تدريبات تفاعلية</h2>
          <p style="background: #f0f9ff; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem;">
            <strong>📝 التعليمات:</strong> اكمل الجمل التالية بالكلمة المناسبة. ستحصل على تغذية راجعة فورية!
          </p>

          <div class="practice-container">
            <div class="row">
              <div style="background: #4f46e5; color: white; padding: 0.5rem; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">1</div>
              <div style="flex:1; font-size: 1.1rem;">
                <strong>_____ is your vacation?</strong> It's in July.<br>
                <small style="color: #6b7280;">إجازتك متى؟</small>
              </div>
              <input id="p1" type="text" placeholder="اكتب الإجابة" />
              <button class="small" onclick="checkPractice('p1','when')">✓ تحقق</button>
              <button class="small" onclick="speak('When is your vacation? It is in July.')">🔊</button>
              <div id="f1" class="feedback"></div>
            </div>

            <div class="row">
              <div style="background: #4f46e5; color: white; padding: 0.5rem; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">2</div>
              <div style="flex:1; font-size: 1.1rem;">
                <strong>The party is _____ Friday.</strong><br>
                <small style="color: #6b7280;">الحفلة يوم الجمعة</small>
              </div>
              <input id="p2" type="text" placeholder="اكتب الإجابة" />
              <button class="small" onclick="checkPractice('p2','on')">✓ تحقق</button>
              <button class="small" onclick="speak('The party is on Friday.')">🔊</button>
              <div id="f2" class="feedback"></div>
            </div>

            <div class="row">
              <div style="background: #4f46e5; color: white; padding: 0.5rem; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">3</div>
              <div style="flex:1; font-size: 1.1rem;">
                <strong>_____ _____ are you?</strong> I'm fifteen.<br>
                <small style="color: #6b7280;">عمرك كام؟</small>
              </div>
              <input id="p3" type="text" placeholder="كلمتين" />
              <button class="small" onclick="checkPractice('p3','how old')">✓ تحقق</button>
              <button class="small" onclick="speak('How old are you? I am fifteen.')">🔊</button>
              <div id="f3" class="feedback"></div>
            </div>

            <div class="row">
              <div style="background: #4f46e5; color: white; padding: 0.5rem; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">4</div>
              <div style="flex:1; font-size: 1.1rem;">
                <strong>Our final test is _____ September.</strong><br>
                <small style="color: #6b7280;">امتحاننا النهائي في سبتمبر</small>
              </div>
              <input id="p4" type="text" placeholder="اكتب الإجابة" />
              <button class="small" onclick="checkPractice('p4','in')">✓ تحقق</button>
              <button class="small" onclick="speak('Our final test is in September.')">🔊</button>
              <div id="f4" class="feedback"></div>
            </div>

            <div class="row">
              <div style="background: #4f46e5; color: white; padding: 0.5rem; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">5</div>
              <div style="flex:1; font-size: 1.1rem;">
                <strong>_____ is your name?</strong> My name is Ahmed.<br>
                <small style="color: #6b7280;">اسمك إيه؟</small>
              </div>
              <input id="p5" type="text" placeholder="اكتب الإجابة" />
              <button class="small" onclick="checkPractice('p5','what')">✓ تحقق</button>
              <button class="small" onclick="speak('What is your name? My name is Ahmed.')">🔊</button>
              <div id="f5" class="feedback"></div>
            </div>
          </div>

          <div style="margin-top: 2rem; text-align: center; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border-radius: 12px;">
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
              <button onclick="readAllExamples()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                🔊 اقرأ جميع التدريبات
              </button>
              <button class="btn secondary" onclick="clearPractice()">
                🔄 إعادة ضبط التدريبات
              </button>
              <button onclick="checkAllPractice()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                ✅ تحقق من جميع الإجابات
              </button>
            </div>
          </div>
        </section>

        <!-- Quiz Section -->
        <section class="card">
          <h2>🎯 الاختبار النهائي</h2>
          
          <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
              <div style="background: #3b82f6; color: white; padding: 0.5rem; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                <strong>📝</strong>
              </div>
              <div>
                <h3 style="margin: 0; color: #1d4ed8;">تعليمات الاختبار</h3>
                <p style="margin: 0; color: #1e40af;">اختبر معلوماتك في 10 أسئلة متنوعة</p>
              </div>
            </div>
            
            <ul style="margin: 0; padding-left: 1.5rem; color: #1e40af;">
              <li>اقرأ كل سؤال بعناية</li>
              <li>اختر الإجابة الصحيحة من الخيارات</li>
              <li>اضغط 🔊 لسماع نطق السؤال</li>
              <li>اضغط "احسب نتيجتي" عند الانتهاء</li>
            </ul>
          </div>

          <!-- Quiz Progress Bar -->
          <div style="background: #f1f5f9; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
              <span style="font-weight: 600; color: #475569;">التقدم في الاختبار</span>
              <span id="quiz-progress" style="font-weight: 600; color: #4f46e5;">0/10</span>
            </div>
            <div style="width: 100%; background: #e2e8f0; border-radius: 10px; height: 8px;">
              <div id="progress-bar" style="width: 0%; background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); height: 100%; border-radius: 10px; transition: width 0.3s ease;"></div>
            </div>
          </div>

          <ol id="quiz" class="quiz-list">
            <!-- quiz items generated by JS -->
          </ol>

          <div style="background: #f8fafc; padding: 1.5rem; border-radius: 12px; margin-top: 2rem;">
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; align-items: center;">
              <button id="scoreBtn" onclick="scoreQuiz()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); font-size: 1.1rem; padding: 1rem 2rem;">
                🎯 احسب نتيجتي
              </button>
              <button class="btn secondary" onclick="restartQuiz()" style="font-size: 1.1rem; padding: 1rem 2rem;">
                🔄 إعادة الاختبار
              </button>
            </div>
            
            <div id="score-container" style="margin-top: 1.5rem; text-align: center; display: none;">
              <div id="score" style="font-size: 1.5rem; font-weight: 700; padding: 1rem; border-radius: 10px;"></div>
            </div>
          </div>
        </section>

      </div>

      <!-- RIGHT: quick reference + audio controls -->
      <aside>
        <!-- Quick Reference Card -->
        <div class="card">
          <h3 style="color: #4f46e5; margin-top: 0;">📚 مرجع سريع</h3>
          
          <div style="display: grid; gap: 0.75rem;">
            <div style="padding: 0.75rem; background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-radius: 8px; border-left: 4px solid #3b82f6;">
              <strong style="color: #1d4ed8;">What</strong><br>
              <small>للأشياء والأسماء</small>
            </div>
            
            <div style="padding: 0.75rem; background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border-radius: 8px; border-left: 4px solid #8b5cf6;">
              <strong style="color: #7c2d12;">When</strong><br>
              <small>للأوقات والتواريخ</small>
            </div>
            
            <div style="padding: 0.75rem; background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); border-radius: 8px; border-left: 4px solid #22c55e;">
              <strong style="color: #15803d;">In</strong><br>
              <small>شهور، سنين، فصول</small>
            </div>
            
            <div style="padding: 0.75rem; background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%); border-radius: 8px; border-left: 4px solid #f97316;">
              <strong style="color: #c2410c;">On</strong><br>
              <small>أيام، تواريخ محددة</small>
            </div>
            
            <div style="padding: 0.75rem; background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); border-radius: 8px; border-left: 4px solid #ec4899;">
              <strong style="color: #be185d;">How old</strong><br>
              <small>للسؤال عن العمر</small>
            </div>
          </div>
        </div>

        <!-- Audio Controls Card -->
        <div class="card">
          <h3 style="color: #4f46e5; margin-top: 0;">🔊 أدوات صوتية</h3>
          <p style="color: #6b7280; margin-bottom: 1.5rem;">تحكم في إعدادات النطق الصوتي</p>
          
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">سرعة النطق:</label>
            <div style="display: flex; align-items: center; gap: 0.5rem;">
              <span style="font-size: 0.9rem;">بطيء</span>
              <input id="rate" type="range" min="0.5" max="2" step="0.1" value="1" style="flex: 1;"/>
              <span style="font-size: 0.9rem;">سريع</span>
            </div>
            <div id="rate-value" style="text-align: center; font-size: 0.9rem; color: #6b7280; margin-top: 0.5rem;">1x</div>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">اختيار الصوت:</label>
            <select id="voiceSelect" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 2px solid #e5e7eb;">
              <option>تحميل الأصوات...</option>
            </select>
          </div>
          
          <button onclick="testVoice()" style="width: 100%; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
            🎤 تجربة الصوت
          </button>
        </div>

        <!-- Progress Card -->
        <div class="card">
          <h3 style="color: #4f46e5; margin-top: 0;">📊 تقدمك في التعلم</h3>
          
          <div style="margin-bottom: 1rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
              <span>التدريبات</span>
              <span id="practice-progress">0/5</span>
            </div>
            <div style="width: 100%; background: #e5e7eb; border-radius: 10px; height: 6px;">
              <div id="practice-bar" style="width: 0%; background: #10b981; height: 100%; border-radius: 10px; transition: width 0.3s ease;"></div>
            </div>
          </div>
          
          <div style="margin-bottom: 1rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
              <span>الاختبار</span>
              <span id="quiz-score">-/10</span>
            </div>
            <div style="width: 100%; background: #e5e7eb; border-radius: 10px; height: 6px;">
              <div id="quiz-bar" style="width: 0%; background: #3b82f6; height: 100%; border-radius: 10px; transition: width 0.3s ease;"></div>
            </div>
          </div>

          <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 10px;">
            <div id="overall-progress" style="font-size: 1.2rem; font-weight: 700; color: #4f46e5;">0%</div>
            <div style="font-size: 0.9rem; color: #6b7280;">إجمالي التقدم</div>
          </div>
        </div>

        <!-- Tips Card -->
        <div class="card">
          <h3 style="color: #4f46e5; margin-top: 0;">💡 نصائح للتعلم</h3>
          <ul style="list-style: none; padding: 0; margin: 0;">
            <li style="padding: 0.75rem; margin: 0.5rem 0; background: #f0f9ff; border-radius: 8px; border-left: 4px solid #0ea5e9;">
              <strong>👂 استمع جيداً:</strong><br>
              <small>استخدم الصوت لتحسين النطق</small>
            </li>
            <li style="padding: 0.75rem; margin: 0.5rem 0; background: #ecfdf5; border-radius: 8px; border-left: 4px solid #10b981;">
              <strong>📝 تدرب يومياً:</strong><br>
              <small>الممارسة المنتظمة تحسن الفهم</small>
            </li>
            <li style="padding: 0.75rem; margin: 0.5rem 0; background: #fef7cd; border-radius: 8px; border-left: 4px solid #eab308;">
              <strong>🔁 كرر المحاولة:</strong><br>
              <small>لا تتردد في إعادة الاختبار</small>
            </li>
          </ul>
        </div>

        <div class="card" style="margin-top:12px">
          <h4>أمثلة إضافية قصيرة (اضغط 🔊 للاستماع)</h4>
          <ol>
            <li>When do you go to school? <button class="small" onclick="speak('When do you go to school?')">🔊</button></li>
            <li>What is your name? <button class="small" onclick="speak('What is your name?')">🔊</button></li>
            <li>I'm 12 years old. <button class="small" onclick="speak("I'm 12 years old.")">🔊</button></li>
            <li>The meeting is on Tuesday. <button class="small" onclick="speak('The meeting is on Tuesday.')">🔊</button></li>
            <li>We will travel in September. <button class="small" onclick="speak('We will travel in September.')">🔊</button></li>
          </ol>
        </div>

      </aside>
    </div>

    <footer style="margin-top: 4rem; padding: 2rem; background: linear-gradient(135deg, #1f2937 0%, #374151 100%); border-radius: 20px; color: white; text-align: center;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
        <div>
          <h4 style="color: #60a5fa; margin-bottom: 1rem;">🎯 هدف الدرس</h4>
          <p style="margin: 0; line-height: 1.6;">تعلم أساسيات أسئلة WH في الإنجليزية مع التطبيق العملي والنطق الصوتي</p>
        </div>
        <div>
          <h4 style="color: #34d399; margin-bottom: 1rem;">💻 التقنيات المستخدمة</h4>
          <p style="margin: 0; line-height: 1.6;">HTML5, CSS3, JavaScript, و Web Speech API للنطق التفاعلي</p>
        </div>
        <div>
          <h4 style="color: #fbbf24; margin-bottom: 1rem;">📱 متوافق مع</h4>
          <p style="margin: 0; line-height: 1.6;">جميع المتصفحات الحديثة والأجهزة المحمولة</p>
        </div>
      </div>
      
      <hr style="border: none; height: 1px; background: rgba(255,255,255,0.2); margin: 2rem 0;">
      
      <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
        <div>
          <p style="margin: 0; font-size: 0.9rem; opacity: 0.8;">
            🚀 تم النشر على GitHub Pages | 
            📧 للتواصل: qais@example.com
          </p>
        </div>
        <div style="display: flex; gap: 1rem;">
          <button onclick="window.location.reload()" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
            🔄 إعادة تحميل
          </button>
          <button onclick="window.print()" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
            🖨️ طباعة
          </button>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Global state
    let practiceCorrect = 0;
    let quizAnswered = 0;
    let quizCorrect = 0;
    
    // ENHANCED PRACTICE CHECK
    function checkPractice(id, correct){
      const val = document.getElementById(id).value.trim().toLowerCase();
      const fb = document.getElementById('f'+id.slice(1));
      
      if(!val){ 
        fb.textContent = 'اكتب إجابتك أولاً'; 
        fb.className='feedback wrong'; 
        return;
      }
      
      const isCorrect = val===correct || (correct==='how old' && val.replace(/\s+/g,' ')==='how old');
      
      if(isCorrect){
        fb.textContent='🎉 ممتاز! إجابة صحيحة'; 
        fb.className='feedback correct';
        if(!fb.dataset.counted) {
          practiceCorrect++;
          fb.dataset.counted = 'true';
        }
        // Add celebration animation
        fb.style.animation = 'fadeInUp 0.5s ease';
      } else { 
        fb.textContent=`❌ خطأ — الإجابة الصحيحة: ${correct}`; 
        fb.className='feedback wrong';
        fb.dataset.counted = 'false';
      }
      
      updatePracticeProgress();
    }
    
    function checkAllPractice(){
      ['p1','p2','p3','p4','p5'].forEach((id, index) => {
        const correct = ['when','on','how old','in','what'][index];
        checkPractice(id, correct);
      });
    }
    
    function clearPractice(){ 
      practiceCorrect = 0;
      ['p1','p2','p3','p4','p5'].forEach(i=>{
        document.getElementById(i).value=''; 
        const el=document.getElementById('f'+i.slice(1)); 
        if(el){
          el.textContent='';
          el.dataset.counted = 'false';
        }
      });
      updatePracticeProgress();
    }

    function updatePracticeProgress(){
      const progress = (practiceCorrect / 5) * 100;
      document.getElementById('practice-progress').textContent = `${practiceCorrect}/5`;
      document.getElementById('practice-bar').style.width = `${progress}%`;
      updateOverallProgress();
    }

    // ENHANCED SPEECH UTILITIES
    const synth = window.speechSynthesis;
    const rateInput = document.getElementById('rate');
    const voiceSelect = document.getElementById('voiceSelect');
    let voices = [];
    
    function populateVoices(){
      voices = synth.getVoices().filter(v=>/en|english/i.test(v.lang));
      voiceSelect.innerHTML='';
      if(voices.length === 0) {
        voiceSelect.innerHTML = '<option>لا توجد أصوات متاحة</option>';
        return;
      }
      voices.forEach((v,i)=>{
        const opt = document.createElement('option'); 
        opt.value=i; 
        opt.textContent = v.name + ' (' + v.lang + ')'; 
        voiceSelect.appendChild(opt);
      });
    }
    
    // Rate slider real-time update
    rateInput.addEventListener('input', function(){
      document.getElementById('rate-value').textContent = this.value + 'x';
    });
    
    populateVoices();
    if(typeof speechSynthesis!=='undefined') speechSynthesis.onvoiceschanged = populateVoices;

    function speak(text){
      if(!text || !synth) return;
      synth.cancel(); // Stop any ongoing speech
      
      const ut = new SpeechSynthesisUtterance(text);
      ut.rate = parseFloat(rateInput.value);
      ut.pitch = 1;
      ut.volume = 1;
      
      const idx = parseInt(voiceSelect.value || 0);
      if(voices[idx]) ut.voice = voices[idx];
      
      // Add visual feedback
      const speakingIndicator = document.createElement('div');
      speakingIndicator.style.cssText = 'position:fixed;top:20px;right:20px;background:#4f46e5;color:white;padding:10px 20px;border-radius:25px;z-index:1000;animation:fadeInUp 0.3s ease;';
      speakingIndicator.innerHTML = '🔊 يتم النطق...';
      document.body.appendChild(speakingIndicator);
      
      ut.onend = () => speakingIndicator.remove();
      ut.onerror = () => speakingIndicator.remove();
      
      synth.speak(ut);
    }

    function testVoice(){
      speak('Hello! This is a test of the English pronunciation. مرحباً، هذا اختبار للنطق الإنجليزي.');
    }

    function readAllExamples(){
      const examples = [
        'When is your vacation? It is in July.',
        'The party is on Friday.',
        'How old are you? I am fifteen years old.',
        'Our final test is in September.',
        'What is your name? My name is Ahmed.',
        'What is the date today? It is May fourth.'
      ];
      speak(examples.join(' ... Next example: '));
    }

    // ENHANCED QUIZ DATA WITH ARABIC TRANSLATIONS
    const quizData = [
      {q:'When is your vacation? It is _____ July.', opts:['in','on','at'], a:0, ar:'متى إجازتك؟ في يوليو'},
      {q:'The meeting is _____ Monday.', opts:['in','on','at'], a:1, ar:'الاجتماع يوم الاثنين'},
      {q:'What is the date today? — It\'s May 4th. Which question word is used?', opts:['When','What','How old'], a:1, ar:'ما التاريخ اليوم؟'},
      {q:'Which is correct: I am _____ years old.', opts:['twenty','twenty years old','years old'], a:0, ar:'أي من هذه صحيح؟'},
      {q:'Our final test is _____ September.', opts:['in','on','at'], a:0, ar:'امتحاننا النهائي في سبتمبر'},
      {q:'Which preposition is used with months?', opts:['on','in','by'], a:1, ar:'أي حرف جر نستخدم مع الشهور؟'},
      {q:'The party is on Friday. What is the day after Friday?', opts:['Saturday','Thursday','Sunday'], a:0, ar:'ما اليوم الذي يأتي بعد الجمعة؟'},
      {q:'Which number is "eightieth"?', opts:['88th','80th','18th'], a:1, ar:'أي رقم يعني "الثمانون"؟'},
      {q:'If something is "enormous" it means it is', opts:['very small','very big','very old'], a:1, ar:'كلمة "enormous" تعني'},
      {q:'What question do we ask to know someone\'s age?', opts:['When','How old','What'], a:1, ar:'أي سؤال نسأله لمعرفة العمر؟'}
    ];

    function buildQuiz(){
      const qEl = document.getElementById('quiz'); 
      qEl.innerHTML='';
      
      quizData.forEach((item,i)=>{
        const li = document.createElement('li'); 
        li.className='quiz-item';
        li.dataset.questionId = i;
        
        li.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;">
            <div style="flex:1;">
              <div style="background:#4f46e5;color:white;padding:0.3rem 0.8rem;border-radius:15px;display:inline-block;font-size:0.9rem;margin-bottom:0.5rem;">
                السؤال ${i+1} من ${quizData.length}
              </div>
              <div style="font-size:1.1rem;font-weight:600;margin-bottom:0.5rem;">${escapeHtml(item.q)}</div>
              <div style="font-size:0.9rem;color:#6b7280;">${item.ar}</div>
            </div>
            <button class="small" onclick="speak('${escapeQuotes(item.q)}')" style="margin-left:1rem;">🔊</button>
          </div>
        `;
        
        const form = document.createElement('div');
        form.style.marginTop = '1rem';
        
        item.opts.forEach((opt,j)=>{
          const id = 'q'+i+'o'+j;
          const label = document.createElement('label'); 
          label.style.cssText = 'display:block;margin:0.75rem 0;padding:0.75rem;background:#f8fafc;border-radius:8px;cursor:pointer;transition:all 0.3s ease;border:2px solid transparent;';
          label.innerHTML = `<input type='radio' name='q${i}' value='${j}' onchange='updateQuizProgress()' style='margin-right:0.5rem;'/> <span style='font-weight:500;'>${opt}</span>`;
          
          // Add hover effects
          label.addEventListener('mouseenter', () => {
            label.style.background = '#e2e8f0';
            label.style.borderColor = '#cbd5e1';
          });
          label.addEventListener('mouseleave', () => {
            if(!label.querySelector('input').checked) {
              label.style.background = '#f8fafc';
              label.style.borderColor = 'transparent';
            }
          });
          
          form.appendChild(label);
        });
        
        li.appendChild(form);
        qEl.appendChild(li);
      });
    }

    function updateQuizProgress(){
      const answered = document.querySelectorAll('input[type="radio"]:checked').length;
      quizAnswered = answered;
      
      const progress = (answered / quizData.length) * 100;
      document.getElementById('quiz-progress').textContent = `${answered}/${quizData.length}`;
      document.getElementById('progress-bar').style.width = `${progress}%`;
      
      updateOverallProgress();
    }

    function updateOverallProgress(){
      const practicePercent = (practiceCorrect / 5) * 50; // 50% weight for practice
      const quizPercent = (quizCorrect / quizData.length) * 50; // 50% weight for quiz
      const overall = Math.round(practicePercent + quizPercent);
      
      document.getElementById('overall-progress').textContent = `${overall}%`;
      
      // Update quiz score display
      if(quizCorrect > 0) {
        document.getElementById('quiz-score').textContent = `${quizCorrect}/${quizData.length}`;
        const quizBarProgress = (quizCorrect / quizData.length) * 100;
        document.getElementById('quiz-bar').style.width = `${quizBarProgress}%`;
      }
    }
    
    function escapeHtml(s){ 
      return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); 
    }
    
    function escapeQuotes(s){ 
      return s.replace(/'/g,"\\'"); 
    }

    function scoreQuiz(){
      let correct = 0;
      let answered = 0;
      
      quizData.forEach((item,i)=>{
        const sel = document.querySelector('input[name=q'+i+']:checked');
        const parent = document.querySelectorAll('.quiz-item')[i];
        
        // Reset styles
        parent.style.borderColor = '#e5e7eb';
        parent.style.background = '#ffffff';
        
        if(sel) {
          answered++;
          const isCorrect = parseInt(sel.value) === item.a;
          
          if(isCorrect){ 
            correct++; 
            parent.style.borderColor = '#10b981';
            parent.style.background = 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)';
            
            // Add checkmark
            const checkmark = document.createElement('div');
            checkmark.innerHTML = '✅';
            checkmark.style.cssText = 'position:absolute;top:10px;left:10px;font-size:1.5rem;';
            parent.style.position = 'relative';
            parent.appendChild(checkmark);
          } else { 
            parent.style.borderColor = '#ef4444';
            parent.style.background = 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)';
            
            // Add X mark and show correct answer
            const xmark = document.createElement('div');
            xmark.innerHTML = '❌';
            xmark.style.cssText = 'position:absolute;top:10px;left:10px;font-size:1.5rem;';
            parent.style.position = 'relative';
            parent.appendChild(xmark);
            
            // Highlight correct answer
            const correctLabel = parent.querySelectorAll('label')[item.a];
            correctLabel.style.background = '#dcfce7';
            correctLabel.style.borderColor = '#10b981';
            correctLabel.style.fontWeight = 'bold';
          }
        }
      });
      
      if(answered === 0) {
        alert('⚠️ يرجى الإجابة على الأسئلة أولاً');
        return;
      }
      
      quizCorrect = correct;
      const score = Math.round((correct/quizData.length)*100);
      
      // Enhanced score display
      const scoreContainer = document.getElementById('score-container');
      const scoreEl = document.getElementById('score');
      
      scoreContainer.style.display = 'block';
      
      let scoreColor, scoreEmoji, scoreMessage;
      if(score >= 90) {
        scoreColor = '#10b981';
        scoreEmoji = '🏆';
        scoreMessage = 'ممتاز جداً!';
      } else if(score >= 70) {
        scoreColor = '#3b82f6';
        scoreEmoji = '🎉';
        scoreMessage = 'جيد جداً!';
      } else if(score >= 50) {
        scoreColor = '#f59e0b';
        scoreEmoji = '👍';
        scoreMessage = 'جيد، يمكنك التحسن!';
      } else {
        scoreColor = '#ef4444';
        scoreEmoji = '📚';
        scoreMessage = 'تحتاج لمزيد من المراجعة';
      }
      
      scoreEl.innerHTML = `
        <div style="background:${scoreColor};color:white;padding:1.5rem;border-radius:15px;margin:1rem 0;">
          <div style="font-size:3rem;margin-bottom:0.5rem;">${scoreEmoji}</div>
          <div style="font-size:1.8rem;font-weight:700;">نتيجتك: ${correct}/${quizData.length} (${score}%)</div>
          <div style="font-size:1.2rem;margin-top:0.5rem;">${scoreMessage}</div>
        </div>
      `;
      
      updateOverallProgress();
      
      // Speak result in Arabic and English
      speak(`نتيجتك ${correct} من ${quizData.length}. Your score is ${correct} out of ${quizData.length}, that is ${score} percent.`);
      
      // Scroll to score
      scoreContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function restartQuiz(){
      if(confirm('🔄 هل تريد إعادة الاختبار؟ سيتم مسح جميع الإجابات.')){
        quizCorrect = 0;
        quizAnswered = 0;
        buildQuiz(); 
        document.getElementById('score-container').style.display = 'none';
        document.getElementById('quiz-progress').textContent = '0/10';
        document.getElementById('progress-bar').style.width = '0%';
        updateOverallProgress();
        
        // Scroll to top of quiz
        document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
      }
    }

    // Initialize everything
    document.addEventListener('DOMContentLoaded', function(){
      buildQuiz();
      updatePracticeProgress();
      updateQuizProgress();
      updateOverallProgress();
      
      // Add some interactive animations
      const cards = document.querySelectorAll('.card');
      cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
      });
    });
    
    // Initialize immediately as well (fallback)
    buildQuiz();

  </script>
</body>
</html>
